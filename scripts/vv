#!/usr/bin/env bash
# Verification/view shortcut
# Usage: vv [command]

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"

cd "$PROJECT_DIR" || exit 1

# If no arguments, show help
if [[ $# -eq 0 ]] || [[ "$1" == "--help" ]] || [[ "$1" == "-h" ]]; then
  echo "Verification/View Shortcut (vv)"
  echo ""
  echo "Usage:"
  echo "  vv deploy              # Verify deployment"
  echo "  vv users               # Check Convex users"
  echo "  vv clerk               # Debug Clerk integration"
  echo "  vv convex              # Open Convex dashboard"
  echo "  vv status              # Git status"
  echo "  vv --help              # Show this help"
  exit 0
fi

case "$1" in
  deploy|deployment)
    node scripts/verify-deployment.js "${@:2}"
    ;;
  users|user)
    node scripts/check-convex-users.mjs "${@:2}"
    ;;
  clerk|auth)
    node scripts/debug-clerk.mjs "${@:2}"
    ;;
  convex|dashboard)
    npx convex dashboard
    ;;
  status|git)
    git status
    ;;
  *)
    echo "Unknown command: $1"
    echo "Run 'vv --help' for usage information"
    exit 1
    ;;
esac

